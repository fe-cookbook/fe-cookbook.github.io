<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>工厂模式？</title>
        <link rel="stylesheet" href="../assets/style.css">
    </head>
    
    <body>
        <div class="app">
        <header class="navbar"></header>
        <aside class="sidebar">
    <ul class="ul-0"><li class="li-1"><p class="a-2">JAVASCRIPT</p></li><li class="li-1"><p class="a-2">基础知识</p><ul class="ul-2"><li class="li-3"><a href="object_get.html" class="a-4">获取对象路径处的值_.get(object, a.b.c, default)</a></li><li class="li-3"><a href="null.html" class="a-4">[typeof null, null instanceof Object]表达式的返回值是什么？</a></li><li class="li-3"><a href="array_map_parseint.html" class="a-4">["1", "2", "3"].map(parseInt) 返回值是什么？</a></li><li class="li-3"><a href="debounce.html" class="a-4">什么是防抖和节流？有什么区别？如何实现？</a></li></ul></li><li class="li-1"><p class="a-2">设计模式</p><ul class="ul-2"><li class="li-3"><p class="a-4">创建型模式</p><ul class="ul-4"><li class="li-5"><a href="singleton.html" class="a-6">单例模式</a></li><li class="li-5"><a href="factory.html" class="a-6">工厂模式</a></li></ul></li><li class="li-3"><p class="a-4">结构型模式</p><ul class="ul-4"><li class="li-5"><a href="proxy.html" class="a-6">代理模式</a></li></ul></li><li class="li-3"><p class="a-4">行为型模式</p><ul class="ul-4"><li class="li-5"><a href="strategy.html" class="a-6">策略模式</a></li><li class="li-5"><a href="publishsubscribe.html" class="a-6">发布-订阅模式</a></li></ul></li></ul></li></ul>
    </aside>
        <main class="page"><div class="page-bd">
        <h1>工厂模式？</h1>
<blockquote>
<p>定义：“定义一个创建对象的接口，但让实现这个接口的类来决定实例化哪个类。工厂方法让类的实例化推迟到子类中进行。”</p>
</blockquote>
<blockquote>
<p>核心：就是把new对象的操作包裹一层，对外提供一个可以根据不同参数创建不同对象的函数。</p>
</blockquote>
<p>优缺点：</p>
<ul>
<li>可以隐藏原始类，方便之后的代码迁移。</li>
<li>由于多了层封装，会造成类的数目过多，系统复杂度增加</li>
</ul>
<h3>实现</h3>
<details><summary>简单工厂实现</summary>
<pre><code class="language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlueBicycle</span> </span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Crete BlueBicycle!'</span>);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloBicycle</span> </span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Crete HelloBicycle!'</span>);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BicycleFactory</span> </span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">switch</span> (name) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"blue"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BlueBicycle();
            <span class="hljs-keyword">case</span> <span class="hljs-string">"hello"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> HelloBicycle();
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"class name wrong"</span>);
        }
    }
}
<span class="hljs-keyword">new</span> BicycleFactory(<span class="hljs-string">'blue'</span>);
<span class="hljs-keyword">new</span> BicycleFactory(<span class="hljs-string">'hello'</span>);
</code></pre>
</details>
<h2>抽象工厂</h2>
<blockquote>
<p>抽象工厂模式就是：围绕一个超级工厂类，创建其他工厂类；再围绕工厂类，创建实体类。<br>
相较于传统的工厂模式，它多出了一个超级工厂类。</p>
</blockquote>
<details><summary>抽象工厂</summary>
<pre><code class="language-javascript"><span class="hljs-comment">// 小蓝单车</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlueBicycle</span> </span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Crete BlueBicycle!'</span>);
    }
}
<span class="hljs-comment">// 哈罗单车</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloBicycle</span> </span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Crete HelloBicycle!'</span>);
    }
}
<span class="hljs-comment">// 小蓝电单车</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElectricBlueBicycle</span> </span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Crete ElectricBlueBicycle!'</span>);
    }
}
<span class="hljs-comment">// 哈罗电单车</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElectricHelloBicycle</span> </span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Crete ElectricHelloBicycle!'</span>);
    }
}
<span class="hljs-comment">// 抽象工厂</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractFactory</span> </span>{
    create() {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"子类请实现接口"</span>);
    }
}
<span class="hljs-comment">// 单车工厂</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BicycleFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFactory</span> </span>{
    create(name) {
        <span class="hljs-keyword">switch</span> (name) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"blue"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BlueBicycle();
            <span class="hljs-keyword">case</span> <span class="hljs-string">"hello"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> HelloBicycle();
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">break</span>;
        }
    }
}
<span class="hljs-comment">// 电单车工厂</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElectricBicycleFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFactory</span> </span>{
    create(name) {
        <span class="hljs-keyword">switch</span> (name) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"blue"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ElectricBlueBicycle();
            <span class="hljs-keyword">case</span> <span class="hljs-string">"hello"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ElectricHelloBicycle();
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">break</span>;
        }
    }
}
<span class="hljs-comment">// 超级工厂</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Factory</span> </span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">switch</span> (name) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"Bicycle"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BicycleFactory();
            <span class="hljs-keyword">case</span> <span class="hljs-string">"ElectricBicycle"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ElectricBicycleFactory();
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">break</span>;
        }
    }
}

<span class="hljs-keyword">new</span> Factory(<span class="hljs-string">'Bicycle'</span>).create(<span class="hljs-string">'blue'</span>)
<span class="hljs-keyword">new</span> Factory(<span class="hljs-string">'ElectricBicycle'</span>).create(<span class="hljs-string">'hello'</span>)
</code></pre>
</details>
<div class="page-nav"><a class="pre" href="singleton.html">←单例模式</a><a class="next" href="proxy.html">代理模式→</a></div>
        </div>
    </main>
        </div>
        <script>
        const pageName = location.href.replace(/^(.*)\/([^/]*).html$/i, "$2");
            const menu = document.querySelector('.sidebar ul');
            const current = menu.querySelector('a[href="' + pageName + '.html"]');
            const list = document.querySelectorAll('.sidebar li');
            const cache = {};
            list.forEach((item, index) => {
                const ul = item.querySelector('ul');
                if (ul) {
                    const holder = item.firstElementChild;
                    holder.setAttribute('data-holder', index);
                    holder.setAttribute('class', 'holder');
                    ul.setAttribute('data-menu', index);
                    cache[index] = ul;
                }
            })
            if (current) {
                current.setAttribute('class', 'cur');
                displayParent(current);
            }
            menu.addEventListener('click', (e) => {
                const target = e.target;
                const holder = target.getAttribute('data-holder');
                if (holder) {
                    const block = cache[holder].style.display === 'block';
                    cache[holder].style.display = block ? 'none' : 'block';
                    target.setAttribute('class', block ? 'holder' : 'holder active');
                }
            });

            function displayParent(ele) {
                const ul = ele.parentElement.parentElement;
                if (ul && ul.getAttribute('data-menu')) {
                    ul.style.display = 'block';
                    ul.previousElementSibling.setAttribute('class', 'holder active');
                    displayParent(ul);
                }
            }
        </script>
        <script src="../assets/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    </body>
    </html>